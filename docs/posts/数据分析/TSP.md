### 目的：找到最短路线，访问一组位置的每个成员并返回起点


|                                                                                                                   |                                                      |                                                         |     |
| ----------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------- | ------------------------------------------------------- | --- |
| [Python 中的 TSP 教程](http://nbviewer.jupyter.org/url/norvig.com/ipython/TSP.ipynb)                                  | ![](https://www.math.uwaterloo.ca/tsp/img/trans.gif) | [彼得·诺维格 （Peter Norvig](http://norvig.com/)） 对 TSP 的精彩介绍 |     |
| [切割平面法](https://www.youtube.com/watch?v=STbkQbsIYVQ)                                                              | ![](https://www.math.uwaterloo.ca/tsp/img/trans.gif) | YouTube 视频（以 Siri 的声音播放）                                |     |
| [口袋妖怪围棋之旅](https://www.math.uwaterloo.ca/tsp/poke/index.html)                                                     | ![](https://www.math.uwaterloo.ca/tsp/img/trans.gif) | 前往 Catch 'em All 的最短路线                                  |     |
| [额外里程之旅](https://www.math.uwaterloo.ca/tsp/county/index.html)                                                     | ![](https://www.math.uwaterloo.ca/tsp/img/trans.gif) | 驱车前往美国所有 3100 个县城                                       |     |
| [大学之旅女王](https://www.math.uwaterloo.ca/tsp/college/index.html)                                                    | ![](https://www.math.uwaterloo.ca/tsp/img/trans.gif) | 参观 647 所大学的最佳公路旅行                                       |     |
| [奥地利徒步之旅](https://www.math.uwaterloo.ca/tsp/road/austria.html)                                                    | ![](https://www.math.uwaterloo.ca/tsp/img/trans.gif) | 欣赏100座山峰的景色                                             |     |
| [《科学美国人》](http://www.scientificamerican.com/article.cfm?id=case-traveling-salesman-unsolvable-limits-computation) | ![](https://www.math.uwaterloo.ca/tsp/img/trans.gif) | 关于Yogi Berra和TSP的短片                                     |     |
| [旅行推销员](http://www.travellingsalesmanmovie.com/)                                                                  | ![](https://www.math.uwaterloo.ca/tsp/img/trans.gif) | 惊悚电影以 TSP 的解决方案为中心                                      |     |
| [蒙娜丽莎 TSP](https://www.math.uwaterloo.ca/tsp/data/ml/monalisa.html)                                               | ![](https://www.math.uwaterloo.ca/tsp/img/trans.gif) | 1,000 个城市挑战问题的 1,000 美元奖金。                              |     |
| [PLA85900](https://www.math.uwaterloo.ca/tsp/pla85900/index.html)                                                 | ![](https://www.math.uwaterloo.ca/tsp/img/trans.gif) | 85,900 个城市 TSP 的解决方案。                                   |     |
| [爱荷华州之旅](https://www.math.uwaterloo.ca/tsp/iowa/index.html)                                                       | ![](https://www.math.uwaterloo.ca/tsp/img/trans.gif) | 99 个县竞选之旅的最佳路线。                                         |     |


# python实现TSP

#### alltours_tsp
**所有游览算法**：生成所有可能的城市游览，并选择最短的游览（游览时间最短的游览）
**所有非冗余游览算法**：武断地说，所有旅行都必须从城市集中的第一个城市开始。将第一个城市拉出来，然后将其重新固定到其余城市的所有排列中。`(1, 2, 3)``(2, 3, 1)``(3, 1, 2)`
-借此机会将游览构建为列表而不是元组
-我们可以验证 3 个城市现在只有 2 个旅游（不是 6 个），4 个城市有 6 个旅游（不是 24 个）
##### 欧几里得 TSP
**是重要的特例**，其中任何两个城市之间的距离是欧几里得距离，即二维平面中点之间的直线距离


**近似算法——如果我们愿意接受一个很短但不能保证最短的旅行**
- **最近邻算法**：让游览从一个城市到最近的邻居。重复。
- **贪婪算法**：找到任意两个城市之间的最短距离，并将该边缘包含在游览中。重复。
**近似优化**
- **重复策略**：采用某种算法并多次重新运行，每次改变某些方面，并采用得分最高的解决方案。
- **更改策略**：使用一些算法来创建一个解决方案，然后对解决方案进行小的更改以改进它。
- **集成策略**：采用两种或多种算法，将它们全部应用于问题，并选择最佳解决方案。
#### nn_tsp
**最近邻算法**：从任何城市开始，每一步都通过前一个城市，移动到尚未访问的最近邻居
#### repeated_nn_tsp
**重复最近邻算法**：给出一个可选参数，尝试从不同城市开始，抽取指定大小的随机样本的功能
#### 测试函数
**“地图”**：表示一组城市的多重试验
**标杆**：在标准输入集合上运行函数，以比较其性能
**比较多种算法**：打印汇总统计数据，游览长度的平均值、标准差、最小值和最大值，以及所花费的时间以及城市集的数量和大小
**多少个起始城市最适合**：25~50
#### **异常值检查**(更改策略)
**区段（Segment）**：游览形成循环，但区段没有循环，它的两端都是开放式的，会形成如下规划：`[A, B, C, D]` `[A, B]` `[B, C, D]` `[A, B, C, D]` `[A, B, C, D]` `D` `A`
**反转路段改变行程**：
![[Pasted image 20240716165103.png]]
将红改为绿，得到如下改变`[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]` `[5, 6, 7, 8, 9]` ——>
`[0, 1, 2, 3, 4, 9, 8, 7, 6, 5]` `[5, 6, 7, 8, 9]`


#### 非随机地图
真实的地图上工作，基于实际公路旅行距离而不是直线距离的旅行
##### 贪心算法
维护一组区段，每个城市都定义了自己的 1 个城市区段。找到连接两个不同区段的两个端点的最短边，并将这些区段与该边连接起来。重复，直到我们形成一个游览所有城市的路段。
看不懂惹……
详细草图：
1. 预先计算**边**列表，首先按最短边排序。边缘是一对城市;如果列表包含，则它不包含 ，并且从不包含 。`(A, B)``(B, A)``(A, A)`
2. 维护将**端点**映射到**段**的字典，例如 .最初，每个城市都是其自己的 1 个城市长段的端点，但当我们将区段连接在一起时，一些城市不再是端点，并从字典中删除。`{A: [A, B, C, D], D: [A, B, C, D]}`
3. 按最短先的顺序遍历边缘。当您找到一条边，使得 和 都是不同段的端点时，请将这两个段连接在一起。维护终结点字典以反映此新段。创建时停止`(A, B)``A``B`
**贪婪算法比最近邻效果差，但它速度很快（尤其是在大地图上）**
##### 可视化贪婪算法
看代码

#### 分而治之
**方法**：
- 将城市集一分为二。
- 为每一半找到一个旅游。
- 将这两个旅行合二为一。
**诀窍：**
当 _n_ 很小时，可以直接完成分半。
当 _n_ 很大，第 2 步通过递归调用完成，将一半分成两个较小的一半。
**合二为一的操作：**
首先，我们考虑从两个巡游中的每一个中删除一条边的所有方法。如果我们从游览中删除一条边，我们会得到一个线段。
对这些线段进行旋转，任何候选组合巡回都包括对第一次巡回进行轮换，并在其后面附加第二次巡回巡回的轮换
但有一点需要注意：当我们去附加两个部分时，有两种方法可以做到这一点——要么保持第二部分不变，要么反转第二部分。
**与贪婪算法或最近邻算法相比，分而治之的优化帮助要小**

## **其他经典算法**
#### 最小生成树算法：`mst_tsp`

**最小生成树遍历算法：** 构造最小生成树，然后进行预序遍历。这将为您提供一个保证不超过最小旅行两倍的旅行。
**方法**：列出所有边并对其进行排序，最短的先排序。
将一棵树初始化为单根城市（我们将任意删除第一个城市）。现在重复以下操作，直到树包含所有城市：找到将树中的城市 （A） 与树中尚未存在的城市 （B） 连接起来的最短边，并将 B 添加到树中 A 的子级列表中。
##### 最小生成树算法的关键作用——可保证行程长度
至少最坏情况只有最优的两倍，虽然实际过程中，贪心和最邻近更好用

#### 动态规划Held-Karp 算法：`hk_tsp`
一种用于查找**最佳**游览的算法，而**不是近似**游览
举例**关键属性**：
给定一个起点城市 A、一个终点城市 C 和一组中间城市 B，那么在所有可能的路段中，从 A 开始，到 C 结束，并且只经过 B 中的所有城市，只有这些路段中最短的路段才能成为最佳游览的一部分。

#### 其他算法集成`ensemble_tsp`
慢死……主要还是看代码和执行时间

# 进一步探索

- **线性规划**：lingo运筹学等
- **启发式算法**：有许多方法可以使用启发式估计来找到好的（但不是最佳的）游览。例如，_蚁群优化算法_会随机选择跟随哪条边，然后用一些虚拟信息素强化最佳巡视中出现的边缘，而其他蚂蚁则倾向于跟随这些信息素。
-  **Lin-Kernighan 启发式**
- **[Christofides 算法]()**保证了 3/2 的最佳行程长度（改进了最小生成树保证）。